---
const tech = {
    html: {name: "HTML", img: "/assets/brand-html5.svg"},
    css: {name: "CSS", img: "/assets/brand-css3.svg"},
    js: {name: "JavaScript", img: "/assets/brand-javascript.svg"},
    vue: {name: "Vue", img: "./assets/vuejs-brands-solid.svg"},
    git: {name: "Git", img: "/assets/brand-git.svg"},
    php: {name: "PHP", img: "/assets/brand-php.svg"},
    symfony: {name: "Symfony", img: "/assets/brand-symfony.svg"},
    tailwind: {name: "Tailwind", img: "/assets/brand-tailwind.svg"},
    mysql: {name: "MySQL", img: "/assets/brand-mysql.svg"},
    codeShow: {name: "Ver código", img: "/assets/code.svg"}
}
const proyects = [
    {
        name: "Rooftop Rush",
        img: "/assets/Rooftop-Rush.png",
        tech: [tech.html, tech.css, tech.js, tech.git],
        description: "Proyecto colaborativo: mi mayor aporte es la parte visual y el movimiento de las plataformas",
        github: "https://github.com/jlld47/Roof-Rush",
        url: "https://jlld47.github.io/Roof-Rush/",
        styleNone: "m-2 flex justify-between items-center",
        display: "show-proyect"
    },
    {
        name: "GalaGame",
        img: "/assets/galagame.png",
        tech: [tech.html, tech.css, tech.js, tech.git],
        description: "Proyecto de juego gala realizado en solitario manejo de colisiones y movimiento de personajes",
        github: "https://github.com/iDankest/GalaGame",
        url: "https://mygalagame.netlify.app/",
        styleNone: "m-2 flex justify-between items-center",
        display: "show-proyect"
    },
    {
        name: "Game Finder",
        img: "/assets/image.png",
        tech: [tech.html, tech.css, tech.js, tech.git, tech.php, tech.symfony, tech.tailwind, tech.mysql],
        description: "Participación en proyecto web de búsqueda de videojuegos utilizando una API de Steam",
        github: "https://github.com/iDankest/Proyecto-Symfony",
        styleNone: "m-2 flex justify-center items-center",
        display: "show-proyect-none"
    },
    {
        name: "Criptomoneda",
        img: "/assets/crypto.png",
        tech: [tech.html, tech.css, tech.js, tech.git, tech.vue],
        description: "Proyecto donde principlamente es el manejo de APIs con Vue.js con composables",
        github: "https://github.com/iDankest/crypto-vue",
        url: "https://cryptovueapi.netlify.app/",
        styleNone: "m-2 flex justify-between items-center",
        display: "show-proyect"
    },
    {
        name: "Admin Gastos",
        img: "/assets/adgastos.png",
        tech: [tech.html, tech.css, tech.js, tech.git, tech.vue],
        description: "Proyecto frontend de administración de gastos poniendo a prueba la reactividad de Vue.js",
        github: "https://github.com/iDankest/admin-gastos",
        url: "https://adgastos.netlify.app/",
        styleNone: "m-2 flex justify-between items-center",
        display: "show-proyect"
    }
]

---
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const iconWrappers = document.querySelectorAll('.tech-icon-wrapper');
    
        iconWrappers.forEach(wrapper => {
            const img = wrapper.querySelector('img');
            const tooltip = wrapper.querySelector('.custom-tooltip');
    
            if (img && tooltip) {
                tooltip.textContent = img.dataset.tooltipText;
            }
        });
    });
    </script>

<section>
    <h2 class="text-2xl text-center mb-10 font-bold">Proyectos destacados</h2>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
        {proyects.map(proyecto => (
        <article class="hover:scale-103 transition-all duration-500 ease-in-out">
            <img class="w-full h-[10em] object-cover rounded-t-lg" src={proyecto.img} alt="Imagen del proyecto Rooftop Rush">
            <div class="tech"><ul class="flex gap-1">
                {proyecto.tech.map(tech => (
                    <li class="tech-icon-wrapper">
                        <img src={tech.img} alt={tech.name} data-tooltip-text={tech.name} class="code">
                        <span class="custom-tooltip"></span>
                    </li>
                ))}
            </ul></div>
                <div class="m-2">
                    <h3 class="text-lg font-bold" >{proyecto.name}</h3>
                    <p class="text-sm">{proyecto.description}</p>
                </div>
                <div class={proyecto.styleNone}>
                    <a href={proyecto.github} target="_blank"><img src={tech.codeShow.img} title={tech.codeShow.name} data-tooltip-text="Ver código" class="code tech-icon-wrapper"></a>
                    <span class="custom-tooltip"></span>
                    <a class={`${proyecto.display}`} href={proyecto.url} target="_blank">Ver Proyecto</a>
                </div>
        </article>
        ))}
    </div>
</section>

<style>
    section{
        margin-top: 2em;
        width: 50vw;
    }
    article{
        
        background-color: #393d41;
        border-radius: 5px;
        display: flex;
        flex-direction: column;
    }
    .tech{
        background-color: blueviolet;
        padding: 0.4em;
    }
    li{
        width: 25px;
        height: 25px;
    }
    .code:hover{
        scale: 1.2;
        transition: all 0.3s ease;
        cursor: pointer;
    }
    .show-proyect{
        background-color: blueviolet;
        padding: 0.1em;
        border-radius: 5px;
    }
    .show-proyect:hover{
        background-color: blueviolet;
        cursor: pointer;
        transition: all 0.3s ease;
        color: black;
    }
    .show-proyect-none{
        display: none;
    }
    @media (max-width: 639px) { /* sm breakpoint de Tailwind - 1px */
        section {
            width: 95vw; /* O el ancho que prefieras para móvil */
        }
        article{
            width: 90%;
            height: auto; /* Ajustar altura automáticamente en móvil */
            margin: 1em auto; /* Añadir margen superior e inferior para espaciado */
        }
    }
    .tech-icon-wrapper {
    position: relative;
    display: inline-flex; /* o block si quieres que ocupe todo el ancho */
}

.custom-tooltip {
    position: absolute;
    bottom: calc(100% + 5px);
    left: 50%;
    transform: translateX(-50%) translateY(5px); /* Inicialmente un poco desplazado */
    background-color: #333;
    color: #fff;
    padding: 5px 8px;
    border-radius: 4px;
    white-space: nowrap;
    font-size: 0.8em;
    z-index: 10;
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    opacity: 0; /* Inicialmente invisible */
    visibility: hidden; /* Oculto para accesibilidad */
    transition: opacity 0.3s ease, transform 0.3s ease, visibility 0.3s ease;
}

.tech-icon-wrapper:hover .custom-tooltip {
    opacity: 1; /* Visible al pasar el ratón */
    visibility: visible;
    transform: translateX(-50%) translateY(0); /* Vuelve a su posición final */
}
    </style>
    